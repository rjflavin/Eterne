if(!customElements.get("cart-note")){class t extends HTMLElement{constructor(){super(),this.disclosure=this.closest("details"),this.disclosure&&this.disclosure.matches(".cart-note-disclosure")&&(this.cartNoteToggle=this.disclosure.querySelector(".js-show-note")),this.fetchRequestOpts={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}},this.init()}init(){this.debouncedHandleNoteChange=debounce(this.handleNoteChange.bind(this),300),this.addEventListener("keyup",this.debouncedHandleNoteChange),this.addEventListener("change",this.debouncedHandleNoteChange)}handleNoteChange(t){if(this.cartNoteToggle){let e=t.target.value?theme.strings.editCartNote:theme.strings.addCartNote;this.cartNoteToggle.textContent!==e&&(this.cartNoteToggle.textContent=e)}this.fetchRequestOpts.body=JSON.stringify({note:t.target.value}),fetch(theme.routes.cartUpdate,this.fetchRequestOpts)}}customElements.define("cart-note",t)}
