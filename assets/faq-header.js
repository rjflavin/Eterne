function debounce(e,t=300){let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>e.apply(this,s),t)}}if(!customElements.get("faq-header")){let e=class extends HTMLElement{connectedCallback(){this.classNames={questionContainerInactive:"faq-search-item-inactive",sectionWithIndexStatus:"section-faq-header--with-index"},this.searchInput=this.querySelector(".faq-search__input"),this.searchInput&&(this.searchInput.addEventListener("change",this.performSearch.bind(this)),this.searchInput.addEventListener("keyup",this.performSearch.bind(this)),this.searchInput.addEventListener("paste",this.performSearch.bind(this))),this.debouncedBuildIndex=debounce(this.buildIndex.bind(this),50),document.addEventListener("theme:faq-header-update",this.debouncedBuildIndex),this.debouncedBuildIndex(),this.querySelector(".faq-index")&&(this.addEventListener("click",e.handleIndexClick.bind(this)),this.closest(".section-faq-header").classList.add(this.classNames.sectionWithIndexStatus),this.resizeIndex.call(this),this.debouncedResizeIndex=debounce(this.resizeIndex.bind(this),250),window.addEventListener("resize",this.debouncedResizeIndex))}disconnectedCallback(){document.removeEventListener("theme:faq-header-update",this.debouncedBuildIndex),window.removeEventListener("resize",this.debouncedResizeIndex)}buildIndex(){let e=this.closest(".section-faq-header"),t=this.querySelector(".faq-index__item-container");t&&t.querySelectorAll(".faq-index-item").forEach(e=>{e.parentNode.removeChild(e)}),this.linkedCollapsibleTabs=[],this.linkedQuestionContainers=[],this.linkedContent=[];let i=e;for(;i.nextElementSibling&&i.nextElementSibling.classList.contains("section-collapsible-tabs");)if(i=i.nextElementSibling,this.linkedCollapsibleTabs.push(i),i.querySelectorAll(".collapsible-tabs__tab").forEach(e=>this.linkedQuestionContainers.push(e)),i.querySelectorAll(".collapsible-tabs__content").forEach(e=>this.linkedContent.push(e)),t){let s=i.querySelector(".collapsible-tabs__heading");if(s){let n=`
              <div class="faq-index-item">
                <a class="faq-index-item__link"></a>
              </div>`,a=document.createRange().createContextualFragment(n),l=a.querySelector(".faq-index-item__link");l.href=`#${s.id}`,l.innerHTML=s.innerHTML,t.appendChild(a)}}t&&this.resizeIndex.call(this)}resizeIndex(){let e=this.querySelector(".faq-index__sticky-container"),t=this.closest(".section-faq-header"),i=t;for(;i.nextElementSibling&&i.nextElementSibling.classList.contains("section-collapsible-tabs");)i=i.nextElementSibling;let s=e.getBoundingClientRect(),n=i.getBoundingClientRect();e.style.height=`${n.bottom-s.top}px`}performSearch(){setTimeout(()=>{let e=this.searchInput.value.split(" "),t=[];e.forEach(e=>{e.length>0&&t.push(e.toLowerCase())}),this.linkedQuestionContainers.forEach(e=>{if(t.length){let i=!1,s=e.textContent.toLowerCase();t.forEach(e=>{s.indexOf(e)>=0&&(i=!0)}),i?e.classList.remove(this.classNames.questionContainerInactive):e.classList.add(this.classNames.questionContainerInactive)}else e.classList.remove(this.classNames.questionContainerInactive)}),this.linkedContent.forEach(e=>{t.length?e.classList.add(this.classNames.questionContainerInactive):e.classList.remove(this.classNames.questionContainerInactive)})},10)}static handleIndexClick(e){if(e.target.classList.contains("faq-index-item__link")){e.preventDefault();let t=e.target.href.split("#")[1],i=document.getElementById(t),s=i.getBoundingClientRect().top+window.pageYOffset-50,n=getComputedStyle(document.documentElement).getPropertyValue("--theme-sticky-header-height");n&&(s-=parseInt(n,10)),window.scrollTo({top:s,behavior:"smooth"})}}};window.customElements.define("faq-header",e)}
