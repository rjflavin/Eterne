if(!customElements.get("hotspots-image")){class t extends HTMLElement{constructor(){super(),this.addEventListener("click",this.handleClick.bind(this))}disconnectedCallback(){window.removeEventListener("on:debounced-resize",this.resizeHandler)}handleClick(t){if(!t.target.matches(".hotspot__btn"))return;let e=t.target.parentNode;e===this.activeHotspot?this.closeActiveHotspot(t):(this.activeHotspot&&this.closeActiveHotspot(t),this.activateHotspot(e))}handleClickOutside(t){!(t.target.matches(".hotspot__btn")||t.target.matches(".hotspot__card"))&&this.activeHotspot&&this.closeActiveHotspot(t)}handleKeyup(t){"Escape"===t.key&&this.activeHotspot&&this.closeActiveHotspot(t)}handleTransitionEnd(t){this.activeHotspot||"opacity"!==t.propertyName||(this.classList.add("overflow-hidden"),this.activeCard.style=null,this.activeCard=null,this.removeEventListener("transitionend",this.transitionHandler))}activateHotspot(t){this.activeCard=t.querySelector(".hotspot__card"),this.checkCardPosition(),this.classList.remove("overflow-hidden"),this.setHotspotActiveState(t,!0),trapFocus(t),this.clickOutsideHandler=this.clickOutsideHandler||this.handleClickOutside.bind(this),this.keyUpHandler=this.handleKeyup||this.handleKeyup.bind(this),this.resizeHandler=this.resizeHandler||this.closeActiveHotspot.bind(this),document.addEventListener("click",this.clickOutsideHandler),document.addEventListener("keyup",this.keyUpHandler),window.addEventListener("on:debounced-resize",this.resizeHandler)}closeActiveHotspot(t){"on:debounced-resize"!==t.type&&(this.transitionHandler=this.transitionHandler||this.handleTransitionEnd.bind(this),this.addEventListener("transitionend",this.transitionHandler)),this.activeHotspot&&(this.setHotspotActiveState(this.activeHotspot,!1),removeTrapFocus(),"on:debounced-resize"===t.type&&(this.classList.add("overflow-hidden"),this.activeCard.style=null,this.activeCard=null)),document.removeEventListener("click",this.clickOutsideHandler),document.removeEventListener("keyup",this.keyUpHandler)}checkCardPosition(){let t;if(theme.mediaMatches.md)t=this.activeCard.getBoundingClientRect();else{let e=this.activeCard.parentElement.getBoundingClientRect(),i=this.getBoundingClientRect(),s=this.activeCard.clientWidth/2;this.activeCard.style.right=`calc(50% - ${s}px)`,t=this.activeCard.getBoundingClientRect();let a=e.left+e.width/2-t.width/2;if(a<10)this.activeCard.style.right=`calc(50% - ${s-a}px - var(--gutter))`;else{let n=e.left+e.width/2+t.width/2;n>i.width-10&&(this.activeCard.style.right=`calc(50% - ${s-(n-i.width)}px + var(--gutter))`)}}t.bottom>document.documentElement.clientHeight&&(this.activeCard.style.top="auto",this.activeCard.style.bottom="calc(100% + 12px)")}setHotspotActiveState(t,e){t.classList.toggle("is-active",e),t.querySelector(".hotspot__btn").setAttribute("aria-expanded",e),t.querySelector(".hotspot__card").setAttribute("aria-hidden",!e),this.activeHotspot=e?t:null}}customElements.define("hotspots-image",t)}
