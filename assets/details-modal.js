class DetailsModal extends HTMLElement{constructor(){super(),this.detailsEl=this.querySelector("details"),this.toggle=this.querySelector("summary"),this.modal=this.querySelector(".modal"),this.detailsEl.addEventListener("click",this.handleClick.bind(this))}handleClick(t){void 0===this.hasTransition&&(this.hasTransition="0s"!==window.getComputedStyle(this.modal).transitionDuration),this.detailsEl.open?(t.target===this.modal||t.target===this.toggle)&&(t.preventDefault(),this.close()):t.target===this.toggle&&(t.preventDefault(),this.open())}handleTransitionEnd(t){t.target===this.modal&&this.detailsEl.classList.contains("is-closing")&&(this.detailsEl.classList.remove("is-closing"),this.detailsEl.open=!1,document.body.classList.remove("overflow-hidden"),this.detailsEl.removeEventListener("transitionend",this.transitionendHandler))}open(){document.body.classList.add("overflow-hidden"),this.detailsEl.open=!0,trapFocus(this.detailsEl),this.keyupHandler=t=>"Escape"===t.key&&this.close(),this.detailsEl.addEventListener("keyup",this.keyupHandler),this.hasTransition&&(this.transitionendHandler=this.transitionendHandler||this.handleTransitionEnd.bind(this),this.detailsEl.addEventListener("transitionend",this.transitionendHandler))}close(){this.hasTransition?this.detailsEl.classList.add("is-closing"):(this.detailsEl.open=!1,document.body.classList.remove("overflow-hidden")),removeTrapFocus(),this.detailsEl.removeEventListener("keyup",this.keyupHandler)}}customElements.define("details-modal",DetailsModal);
