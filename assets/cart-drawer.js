class CartDrawer extends SideDrawer{connectedCallback(){this.bindEvents()}bindEvents(){this.openDrawerViaEventHandler=this.handleDrawerOpenViaEvent.bind(this),this.closeDrawerViaEventHandler=this.close.bind(this,null),document.addEventListener("dispatch:cart-drawer:open",this.openDrawerViaEventHandler),document.addEventListener("dispatch:cart-drawer:close",this.closeDrawerViaEventHandler),document.addEventListener("dispatch:cart-drawer:refresh",this.cartRefreshHandler),this.addEventListener("on:cart-drawer:before-open",()=>{theme.manuallyLoadImages(this),this.querySelectorAll("cc-cart-cross-sell").forEach(e=>e.init())}),this.addEventListener("on:cart:after-merge",()=>{theme.manuallyLoadImages(this),this.querySelectorAll("cc-cart-cross-sell").forEach(e=>e.init())})}disconnectedCallback(){document.removeEventListener("dispatch:cart-drawer:refresh",this.cartRefreshHandler),document.removeEventListener("dispatch:cart-drawer:open",this.openDrawerViaEventHandler),document.removeEventListener("dispatch:cart-drawer:close",this.closeDrawerViaEventHandler)}handleDrawerOpenViaEvent(e){this.open(e.detail?e.detail.opener:null)}cartRefreshHandler(){this.querySelector("cart-form").refresh()}updateFromCartChange(e){this.querySelector("cart-form").refreshFromHtml(e)}}window.customElements.define("cart-drawer",CartDrawer);
