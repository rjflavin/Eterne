if(!customElements.get("scrolling-image-list")){class e extends HTMLElement{constructor(){super(),window.initLazyScript(this,this.init.bind(this))}init(){if(this.images=this.querySelectorAll(".scrolling-image-list__image"),this.images.length>1){this.contentColumn=this.querySelector(".scrolling-image-list__content-column"),this.featureText=this.querySelector(".scrolling-image-list__content-column .feature-text-paired");let e=window.matchMedia("(min-width: 768px)");this.addListeners(e),e.addEventListener("change",e=>{this.removeListeners(),this.addListeners(e)})}this.setAttribute("loaded","")}addListeners(e){e.matches?(this.throttledHandleScroll=theme.throttleEvent(this.handleScroll.bind(this),100),window.addEventListener("scroll",this.throttledHandleScroll),this.boundUpdatePositioning=this.updatePositioning.bind(this),window.addEventListener("scroll",this.boundUpdatePositioning),window.addEventListener("resize",this.boundUpdatePositioning),this.throttledHandleScroll(),this.boundUpdatePositioning(),this.contentClickListeners=[],this.querySelectorAll(".scrolling-image-list__image").forEach(e=>{let t=()=>this.scrollToImage(e.dataset.index);this.contentClickListeners.push({el:e,oc:t}),e.addEventListener("click",t)}),this.delegatedKeydownHandler=theme.addDelegateEventListener(this,"keydown",".scrolling-image-list__image, .scrolling-image-list__content:not(.scrolling-image-list__content--mobile), .scrolling-image-list__content:not(.scrolling-image-list__content--mobile) a",this.handleKeydown.bind(this))):this.addEventListener("on:carousel-slider:select",this.handleSliderSelect.bind(this))}removeListeners(){if(window.removeEventListener("scroll",this.throttledHandleScroll),window.removeEventListener("scroll",this.boundUpdatePositioning),window.removeEventListener("resize",this.boundUpdatePositioning),this.contentClickListeners)for(let e=0;e<this.contentClickListeners.length;e+=1)this.contentClickListeners[e].el.removeEventListener("click",this.contentClickListeners[e].oc);this.removeEventListener("click",this.delegatedKeydownHandler)}handleScroll(){let t=1,i=Number.MAX_VALUE;this.images.forEach((s,n)=>{let l=e.distanceFromViewportMiddle(s);l<i&&(t=n+1,i=l)}),this.dataset.currentIndex=t}handleKeydown(e,t){if("Tab"===e.code){if(t.classList.contains("scrolling-image-list__image")){if(!e.shiftKey){e.preventDefault(),this.querySelector(`.scrolling-image-list__content:not(.scrolling-image-list__content--mobile)[data-index="${t.dataset.index}"]`).focus();return}"1"!==t.dataset.index&&(e.preventDefault(),this.querySelector(`.scrolling-image-list__image[data-index="${parseInt(t.dataset.index,10)-1}"]`).focus());return}if(t.classList.contains("scrolling-image-list__content")){if(e.shiftKey){e.preventDefault(),this.querySelector(`.scrolling-image-list__image[data-index="${t.dataset.index}"]`).focus();return}null!==t.nextElementSibling&&(e.preventDefault(),t.querySelector("a")?t.querySelector("a").focus():this.querySelector(`.scrolling-image-list__image[data-index="${parseInt(t.dataset.index,10)+1}"]`).focus());return}if("A"===t.tagName){let i=t.closest(".scrolling-image-list__content");if(null!==i.nextElementSibling){let s=[...i.querySelectorAll("a")].pop();s!==t||e.shiftKey||(e.preventDefault(),this.querySelector(`.scrolling-image-list__image[data-index="${parseInt(i.dataset.index,10)+1}"]`).focus())}}}}updatePositioning(){let e=this.contentColumn.getBoundingClientRect(),t=e.top+window.scrollY,i=this.featureText.getBoundingClientRect().height,s=this.images[0].getBoundingClientRect(),n=s.top+window.scrollY+s.height/2;s=this.images[this.images.length-1].getBoundingClientRect();let l=s.top+window.scrollY+s.height/2,o=window.scrollY+window.innerHeight/2;o<n?(this.style.setProperty("--scrolling-image-list-content-offset-y",`${n-t-i/2}px`),this.style.removeProperty("--scrolling-image-list-content-position"),this.style.removeProperty("--scrolling-image-list-content-offset-x"),this.style.removeProperty("--scrolling-image-list-content-width")):o>l?(this.style.setProperty("--scrolling-image-list-content-offset-y",`${l-t-i/2}px`),this.style.removeProperty("--scrolling-image-list-content-position"),this.style.removeProperty("--scrolling-image-list-content-offset-x"),this.style.removeProperty("--scrolling-image-list-content-width")):(this.style.setProperty("--scrolling-image-list-content-position","fixed"),this.style.setProperty("--scrolling-image-list-content-offset-y",`${window.innerHeight/2-i/2}px`),this.style.setProperty("--scrolling-image-list-content-offset-x",`${e.left}px`),this.style.setProperty("--scrolling-image-list-content-width",`${e.width}px`))}handleSliderSelect(e){this.dataset.currentIndex=e.detail.index+1}scrollToImage(e){let t=this.images[e-1];window.scrollTo({left:0,top:theme.getOffsetTopFromDoc(t)-(window.innerHeight-t.clientHeight)/2,behavior:"smooth"})}static distanceFromViewportMiddle(e){let t=window.scrollY+window.innerHeight/2,i=theme.getOffsetTopFromDoc(e)+e.clientHeight/2;return Math.abs(t-i)}}customElements.define("scrolling-image-list",e)}
